/*
Copyright (c) 2019 Daybrush
name: @scena/guides
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/guides.git
version: 0.11.4
*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).Guides=n()}(this,function(){"use strict";var r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function o(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var a=function(){return(a=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function m(n,e){return function(t){t&&(n[e]=t)}}function e(e,r){return function(t){var n=t.prototype;e.forEach(function(t){r(n,t)})}}var y=function(){function t(){this.keys=[],this.values=[]}var n=t.prototype;return n.get=function(t){return this.values[this.keys.indexOf(t)]},n.set=function(t,n){var e=this.keys,r=this.values,i=e.indexOf(t),o=-1===i?e.length:i;e[o]=t,r[o]=n},t}(),b=function(){function t(){this.object={}}var n=t.prototype;return n.get=function(t){return this.object[t]},n.set=function(t,n){this.object[t]=n},t}(),M="function"==typeof Map,i=function(){function t(){}var n=t.prototype;return n.connect=function(t,n){this.prev=t,this.next=n,t&&(t.next=this),n&&(n.prev=this)},n.disconnect=function(){var t=this.prev,n=this.next;t&&(t.next=n),n&&(n.prev=t)},n.getIndex=function(){for(var t=this,n=-1;t;)t=t.prev,++n;return n},t}();var _=function(){function t(t,n,e,r,i,o,a,s){this.prevList=t,this.list=n,this.added=e,this.removed=r,this.changed=i,this.maintained=o,this.changedBeforeAdded=a,this.fixed=s}var n=t.prototype;return Object.defineProperty(n,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(n,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),n.caculateOrdered=function(){var t=function(t,e){var s=[],u=[];return t.forEach(function(t){var n=t[0],e=t[1],r=new i;s[n]=r,u[e]=r}),s.forEach(function(t,n){t.connect(s[n-1])}),t.filter(function(t,n){return!e[n]}).map(function(t,n){var e=t[0],r=t[1];if(e===r)return[0,0];var i=s[e],o=u[r-1],a=i.getIndex();return i.disconnect(),o?i.connect(o,o.next):i.connect(void 0,s[0]),[a,i.getIndex()]})}(this.changedBeforeAdded,this.fixed),s=this.changed,u=[];this.cacheOrdered=t.filter(function(t,n){var e=t[0],r=t[1],i=s[n],o=i[0],a=i[1];if(e!==r)return u.push([o,a]),!0}),this.cachePureChanged=u},t}();function c(t,n,e){var r=M?Map:e?b:y,i=e||function(t){return t},o=[],a=[],s=[],u=t.map(i),c=n.map(i),l=new r,h=new r,f=[],p=[],d={},v=[],g=0,m=0;return u.forEach(function(t,n){l.set(t,n)}),c.forEach(function(t,n){h.set(t,n)}),u.forEach(function(t,n){var e=h.get(t);void 0===e?(++m,a.push(n)):d[e]=m}),c.forEach(function(t,n){var e=l.get(t);void 0===e?(o.push(n),++g):(s.push([e,n]),m=d[n]||0,f.push([e-m,n-g]),p.push(n===e),e!==n&&v.push([e,n]))}),a.reverse(),new _(t,n,o,a,v,s,f,p)}var n="string",s="undefined";function u(t){return typeof t===n}function h(t,r){return void 0===r&&(r="-"),t.replace(/([a-z])([A-Z])/g,function(t,n,e){return""+n+r+e.toLowerCase()})}var l=function(t,n){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function f(t,n){function e(){this.constructor=t}l(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var p=function(){return(p=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function d(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e}function v(t,n){if(t===n)return!1;for(var e in t)if(!(e in n))return!0;for(var e in n)if(t[e]!==n[e])return!0;return!1}function g(i,o){var a=Object.keys(i),e=Object.keys(o),t=c(a,e,function(t){return t}),r={},s={},u={};return t.added.forEach(function(t){var n=e[t];r[n]=o[n]}),t.removed.forEach(function(t){var n=a[t];s[n]=i[n]}),t.maintained.forEach(function(t){var n=t[0],e=a[n],r=[i[e],o[e]];i[e]!==o[e]&&(u[e]=r)}),{added:r,removed:s,changed:u}}function E(t){t.forEach(function(t){t()})}function P(t){var n=0;return t.map(function(t){return null==t?"$compat"+ ++n:""+t})}function x(t,n,e,r){return u(t)?new j("text_"+t,n,e,r,null,{}):new("string"==typeof t.type?T:t.type.prototype.render?A:X)(t.type,n,e,r,t.ref,t.props)}function O(t){var n=[];return t.forEach(function(t){n=n.concat(function(t){return Array.isArray(t)}(t)?O(t):t)}),n}function C(t){var n=t.className,e=d(t,["className"]);return null!=n&&(e.class=n),delete e.style,delete e.children,e}function w(t,n){if(!n)return t;for(var e in n)typeof t[e]===s&&(t[e]=n[e]);return t}function D(t,n){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var i=n||{},o=i.key,a=i.ref,s=d(i,["key","ref"]);return{type:t,key:o,ref:a,props:p(p({},s),{children:O(e).filter(function(t){return null!=t&&!1!==t})})}}var t=function(){function t(t,n,e,r,i,o){void 0===o&&(o={}),this.type=t,this.key=n,this.index=e,this.container=r,this.ref=i,this.props=o,this._providers=[]}var n=t.prototype;return n._should=function(t,n){return!0},n._update=function(t,n,e,r){if(this.base&&!u(n)&&!r&&!this._should(n.props,e))return!1;this.original=n,this._setState(e);var i=this.props;return u(n)||(this.props=n.props,this.ref=n.ref),this._render(t,this.base?i:{},e),!0},n._mounted=function(){var t=this.ref;t&&t(this.base)},n._setState=function(t){},n._updated=function(){var t=this.ref;t&&t(this.base)},n._destroy=function(){var t=this.ref;t&&t(null)},t}();function S(t){var n={},e={};for(var r in t)0===r.indexOf("on")?e[r.replace("on","").toLowerCase()]=t[r]:n[r]=t[r];return{attributes:n,events:e}}var j=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}f(n,t);var e=n.prototype;return e._render=function(t){var n=this,e=!this.base;return e&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push(function(){e?n._mounted():n._updated()}),!0},e._unmount=function(){this.base.parentNode.removeChild(this.base)},n}(t),T=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.events={},t}f(t,n);var e=t.prototype;return e.addEventListener=function(t,n){var e=this.events;e[t]=function(t){t.nativeEvent=t,n(t)},this.base.addEventListener(t,e[t])},e.removeEventListener=function(t){var n=this.events;this.base.removeEventListener(t,n[t]),delete n[t]},e._should=function(t){return v(this.props,t)},e._render=function(t,n){var e=this,r=!this.base;r&&(this.base=document.createElement(this.type)),G(this,this._providers,this.props.children,t,null);var i=this.base,o=S(n),a=o.attributes,s=o.events,u=S(this.props),c=u.attributes,l=u.events;return function(t,n,e){var r=g(t,n),i=r.added,o=r.removed,a=r.changed;for(var s in i)e.setAttribute(s,i[s]);for(var s in a)e.setAttribute(s,a[s][1]);for(var s in o)e.removeAttribute(s)}(C(a),C(c),i),function(t,n,e){var r=g(t,n),i=r.added,o=r.removed,a=r.changed;for(var s in o)e.removeEventListener(s);for(var s in i)e.addEventListener(s,i[s]);for(var s in a)e.removeEventListener(s),e.addEventListener(s,a[s][1]);for(var s in o)e.removeEventListener(s)}(s,l,this),function(t,n,e){var r=e.style,i=g(t,n),o=i.added,a=i.removed,s=i.changed;for(var u in o){var c=h(u,"-");r.setProperty?r.setProperty(c,o[u]):r[c]=o[u]}for(var u in s){c=h(u,"-");r.setProperty?r.setProperty(c,s[u][1]):r[c]=s[u][1]}for(var u in a){c=h(u,"-");r.removeProperty?r.removeProperty(c):r[c]=""}}(n.style||{},this.props.style||{},i),t.push(function(){r?e._mounted():e._updated()}),!0},e._unmount=function(){var t=this.events,n=this.base;for(var e in t)n.removeEventListener(e,t[e]);this._providers.forEach(function(t){t._unmount()}),this.events={},n.parentNode.removeChild(n)},t}(t);function N(t){if(!t)return null;if(t instanceof Node)return t;var n=t._provider._providers;return n.length?N(n[0].base):null}var X=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}f(n,t);var e=n.prototype;return e._render=function(t){var n=this.type(this.props);return G(this,this._providers,n?[n]:[],t),!0},e._unmount=function(){this._providers.forEach(function(t){t._unmount()})},n}(t),Y=function(e){function t(t){var n=e.call(this,"container","container",0,null)||this;return n.base=t,n}f(t,e);var n=t.prototype;return n._render=function(){return!0},n._unmount=function(){},t}(t),A=function(a){function t(t,n,e,r,i,o){return void 0===o&&(o={}),a.call(this,t,n,e,r,i,w(o,t.defaultProps))||this}f(t,a);var n=t.prototype;return n._should=function(t,n){return this.base.shouldComponentUpdate(w(t,this.type.defaultProps),n||this.base.state)},n._render=function(t,n,e){var r=this;this.props=w(this.props,this.type.defaultProps);var i=!this.base;i?(this.base=new this.type(this.props),this.base._provider=this):this.base.props=this.props;var o=this.base,a=o.state,s=o.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),G(this,this._providers,s?[s]:[],t,e,null),t.push(function(){i?(r._mounted(),o.componentDidMount()):(r._updated(),o.componentDidUpdate(n,a))})},n._setState=function(t){t&&(this.base.state=t)},n._unmount=function(){this._providers.forEach(function(t){t._unmount()}),this.base.componentWillUnmount()},t}(t),F=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={}}var n=t.prototype;return n.shouldComponentUpdate=function(t,n){return!0},n.render=function(){return null},n.setState=function(t,n,e){var r=[],i=this._provider;G(i.container,[i],[i.original],r,p(p({},this.state),t),e)&&(n&&r.push(n),E(r))},n.forceUpdate=function(t){this.setState(this.state,t,!0)},n.componentDidMount=function(){},n.componentDidUpdate=function(t,n){},n.componentWillUnmount=function(){},t}(),z=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return f(n,t),n.prototype.shouldComponentUpdate=function(t,n){return v(this.props,t)||v(this.state,n)},n}(F),R=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}f(n,t);var e=n.prototype;return e.componentDidMount=function(){var t=this.props,n=t.element,e=t.container;this._portalProvider=new Y(e),L(n,e,this._portalProvider)},e.componentDidUpdate=function(){var t=this.props;L(t.element,t.container,this._portalProvider)},e.componentWillUnmount=function(){L(null,this.props.container,this._portalProvider),this._portalProvider=null},n}(z);function k(i,a,o){var s=o.map(function(t){return u(t)?null:t.key}),t=c(P(a.map(function(t){return t.key})),P(s),function(t){return t});t.removed.forEach(function(t){a.splice(t,1)[0]._unmount()}),t.ordered.forEach(function(t){var n=t[0],e=t[1],r=a.splice(n,1)[0];a.splice(e,0,r);var i=N(r.base),o=N(a[e+1]&&a[e+1].base);i&&i.parentNode.insertBefore(i,o)}),t.added.forEach(function(t){a.splice(t,0,x(o[t],s[t],t,i))});var n=t.maintained.filter(function(t){t[0];var n=t[1],e=o[n],r=a[n];return(u(e)?"text_"+e:e.type)!==r.type?(r._unmount(),a.splice(n,1,x(e,s[n],n,i)),!0):(r.index=n,!1)});return function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var r=Array(t),i=0;for(n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(t.added,n.map(function(t){t[0];return t[1]}))}function G(i,o,e,r,a,s){var t=k(i,o,e),n=o.filter(function(t,n){return t._update(r,e[n],a,s)}),u=function t(n){if(!n)return null;var e=n.base;return e instanceof Node?e:t(n.container)}(i);return u&&t.reverse().forEach(function(t){var n=o[t],e=N(n.base);if(e&&u!==e&&!e.parentNode){var r=function(t,n){for(var e=t._providers,r=e.length,i=n.index+1;i<r;++i){var o=N(e[i].base);if(o)return o}return null}(i,n);u.insertBefore(e,r)}}),0<n.length}function L(t,n,e){void 0===e&&(e=n.__REACT_COMPAT__);var r=!!e;return function(t,n,e){var r=[];G(t,t._providers,n,r,e),E(r)}(e=e||new Y(n),t?[t]:[]),r||(n.__REACT_COMPAT__=e),e}function I(t,n,e){var r=n.__REACT_COMPAT__;t&&!r&&(n.innerHTML=""),L(t,n,r),e&&e()}var U=["setGuides","type","width","height","rulerStyle","unit","zoom","style","backgroundColor","lineColor","snaps","snapThreshold","direction","container","className","textColor","displayDragPos","dragPosFormat","cspNonce","textFormat","defaultGuides","showGuides"],H=["getGuides","loadGuides","scroll","scrollGuides","resize"],q=["changeGuides","dragStart","drag","dragEnd"],B=function(t,n){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};var W=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.state={scrollPos:0},t.width=0,t.height=0,t}!function(t,n){function e(){this.constructor=t}B(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}(t,n);var e=t.prototype;return e.render=function(){return D("canvas",{ref:m(this,"canvasElement"),style:this.props.style})},e.componentDidMount=function(){var t=this.canvasElement.getContext("2d");this.canvasContext=t,this.resize()},e.componentDidUpdate=function(){this.resize()},e.scroll=function(t){this.draw(t)},e.resize=function(){var t=this.canvasElement,n=this.props,e=n.width,r=n.height,i=n.scrollPos;this.width=e||t.offsetWidth,this.height=r||t.offsetHeight,t.width=2*this.width,t.height=2*this.height,this.draw(i)},e.draw=function(t){void 0===t&&(t=this.state.scrollPos);var n=this.props,e=n.unit,r=n.zoom,i=n.type,o=n.backgroundColor,a=n.lineColor,s=n.textColor,u=n.direction,c=n.textFormat,l=this.width,h=this.height;this.state.scrollPos=t;var f=this.canvasContext,p="horizontal"===i,d="start"===u;"transparent"===o?f.clearRect(0,0,2*l,2*h):(f.rect(0,0,2*l,2*h),f.fillStyle=o,f.fill()),f.save(),f.scale(2,2),f.strokeStyle=a,f.lineWidth=1,f.font="10px sans-serif",f.fillStyle=s,d&&(f.textBaseline="top"),f.translate(.5,0),f.beginPath();for(var v=p?l:h,g=r*e,m=Math.floor(t*r/g),y=Math.ceil((t*r+v)/g)-m,b=0;b<y;++b){var M=((b+m)*e-t)*r;if(-g<=M&&M<v){var _=p?[3+M,d?17:h-17]:[d?17:l-17,M-4],E=_[0],P=_[1],x=""+(b+m)*e;c&&(x=c((b+m)*e)),p?f.fillText(x,E,P):(f.save(),f.translate(E,P),f.rotate(-Math.PI/2),f.fillText(x,0,0),f.restore())}for(var O=0;O<10;++O){var C=M+O/10*g;if(!(C<0||v<=C)){var w=0===O?p?h:l:O%2==0?10:7,D=p?[C,d?0:h-w]:[d?0:l-w,C],S=D[0],j=D[1],T=p?[S,j+w]:[S+w,j],N=T[0],X=T[1];f.moveTo(S,j),f.lineTo(N,X)}}}f.stroke(),f.restore()},t.defaultProps={type:"horizontal",zoom:1,width:0,height:0,unit:50,direction:"end",style:{width:"100%",height:"100%"},backgroundColor:"#333333",textColor:"#ffffff",lineColor:"#777777"},t}(z);function Z(t){return void 0===t}var V=function(){var t=function(){function t(){this._eventHandler={},this.options={}}var n=t.prototype;return n.trigger=function(t,n){void 0===n&&(n={});var e=this._eventHandler[t]||[];if(!(0<e.length))return!0;e=e.concat(),n.eventType=t;var r=!1,i=[n],o=0;n.stop=function(){r=!0},n.currentTarget=this;for(var a=arguments.length,s=new Array(2<a?a-2:0),u=2;u<a;u++)s[u-2]=arguments[u];for(1<=s.length&&(i=i.concat(s)),o=0;e[o];o++)e[o].apply(this,i);return!r},n.once=function(i,o){if("object"==typeof i&&Z(o)){var t,n=i;for(t in n)this.once(t,n[t]);return this}if("string"==typeof i&&"function"==typeof o){var a=this;this.on(i,function t(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];o.apply(a,e),a.off(i,t)})}return this},n.hasOn=function(t){return!!this._eventHandler[t]},n.on=function(t,n){if("object"==typeof t&&Z(n)){var e,r=t;for(e in r)this.on(e,r[e]);return this}if("string"==typeof t&&"function"==typeof n){var i=this._eventHandler[t];Z(i)&&(this._eventHandler[t]=[],i=this._eventHandler[t]),i.push(n)}return this},n.off=function(t,n){if(Z(t))return this._eventHandler={},this;if(Z(n)){if("string"==typeof t)return this._eventHandler[t]=void 0,this;var e,r=t;for(e in r)this.off(e,r[e]);return this}var i,o,a=this._eventHandler[t];if(a)for(i=0;void 0!==(o=a[i]);i++)if(o===n){a=a.splice(i,1);break}return this},t}();return t.VERSION="2.1.2",t}();function $(){return Date.now?Date.now():(new Date).getTime()}function Q(t,n,e,r){t.addEventListener(n,e,r)}function J(t,n,e){t.removeEventListener(n,e)}var K=function(t,n){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};var tt=function(){return(tt=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function nt(t){return function(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=Math.atan2(r,e);return 0<=i?i:i+2*Math.PI}([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function et(t){return t.touches?function(t){for(var n=Math.min(t.length,2),e=[],r=0;r<n;++r)e.push(ot(t[r]));return e}(t.touches):[ot(t)]}function rt(t,n,e){var r=e.length,i=at(t,r),o=i.clientX,a=i.clientY,s=i.originalClientX,u=i.originalClientY,c=at(n,r),l=c.clientX,h=c.clientY,f=at(e,r);return{clientX:s,clientY:u,deltaX:o-l,deltaY:a-h,distX:o-f.clientX,distY:a-f.clientY}}function it(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function ot(t){return{clientX:t.clientX,clientY:t.clientY}}function at(t,n){void 0===n&&(n=t.length);for(var e={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<n;++r){var i=t[r];e.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,e.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,e.clientX+=i.clientX,e.clientY+=i.clientY}return n?{clientX:e.clientX/n,clientY:e.clientY/n,originalClientX:e.originalClientX/n,originalClientY:e.originalClientY/n}:e}var st=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}var n=t.prototype;return n.addClients=function(t){void 0===t&&(t=this.prevClients);var n=this.getPosition(t),e=n.deltaX,r=n.deltaY;return this.movement+=Math.sqrt(e*e+r*r),this.prevClients=t,n},n.getAngle=function(t){return void 0===t&&(t=this.prevClients),nt(t)},n.getRotation=function(t){return void 0===t&&(t=this.prevClients),nt(t)-nt(this.startClients)},n.getPosition=function(t){return rt(t||this.prevClients,this.prevClients,this.startClients)},n.getPositions=function(e){void 0===e&&(e=this.prevClients);var r=this.prevClients;return this.startClients.map(function(t,n){return rt([e[n]],[r[n]],[t])})},n.getMovement=function(t){var n=this.movement;if(!t)return n;var e=at(t,this.length),r=at(this.prevClients,this.length),i=e.clientX-r.clientX,o=e.clientY-r.clientY;return Math.sqrt(i*i+o*o)+n},n.getDistance=function(t){return void 0===t&&(t=this.prevClients),it(t)},n.getScale=function(t){return void 0===t&&(t=this.prevClients),it(t)/it(this.startClients)},n.move=function(n,e){this.startClients.forEach(function(t){t.clientX-=n,t.clientY-=e}),this.prevClients.forEach(function(t){t.clientX-=n,t.clientY-=e})},t}(),ut=["textarea","input"],ct=function(s){function t(t,n){void 0===n&&(n={});var m=s.call(this)||this;m.options={},m.flag=!1,m.pinchFlag=!1,m.datas={},m.isDrag=!1,m.isPinch=!1,m.isMouse=!1,m.isTouch=!1,m.clientStores=[],m.targets=[],m.prevTime=0,m.isDouble=!1,m.onDragStart=function(t,n){if(void 0===n&&(n=!0),m.flag||!1!==t.cancelable){var e=m.options,r=e.container,i=e.pinchOutside,o=e.preventRightClick,a=e.preventDefault,s=e.checkInput,u=m.isTouch,c=!m.flag;if(c){var l=document.activeElement,h=t.target,f=h.tagName.toLowerCase(),p=-1<ut.indexOf(f),d=h.isContentEditable;if(p||d){if(s||l===h)return!1;if(l&&d&&l.isContentEditable&&l.contains(h))return!1}else if((a||"touchstart"===t.type)&&l){var v=l.tagName;(l.isContentEditable||-1<ut.indexOf(v))&&l.blur()}if(m.clientStores=[new st(et(t))],m.flag=!0,m.isDrag=!1,m.datas={},o&&(3===t.which||2===t.button))return m.initDrag(),!1;!1===m.trigger("dragStart",tt({datas:m.datas,inputEvent:t,isTrusted:n},m.getCurrentStore().getPosition()))&&m.initDrag(),m.isDouble=$()-m.prevTime<200,m.flag&&a&&t.preventDefault()}if(!m.flag)return!1;var g=0;if(c&&u&&i&&(g=setTimeout(function(){Q(r,"touchstart",m.onDragStart,{passive:!1})})),!c&&u&&i&&J(r,"touchstart",m.onDragStart),m.flag&&function(t){return t.touches&&2<=t.touches.length}(t)){if(clearTimeout(g),c&&t.touches.length!==t.changedTouches.length)return;m.pinchFlag||m.onPinchStart(t)}}},m.onDrag=function(t,n){if(m.flag){var e=et(t),r=m.moveClients(e,t,!1);(m.pinchFlag||r.deltaX||r.deltaY)&&m.trigger("drag",tt({},r,{isScroll:!!n,inputEvent:t})),m.pinchFlag&&m.onPinch(t,e),m.getCurrentStore().addClients(e)}},m.onDragEnd=function(t){if(m.flag){var n=m.options,e=n.pinchOutside,r=n.container;m.isTouch&&e&&J(r,"touchstart",m.onDragStart),m.flag=!1;var i=m.getCurrentStore().getPosition(),o=$(),a=!m.isDrag&&m.isDouble;m.prevTime=m.isDrag||a?0:o,m.trigger("dragEnd",tt({datas:m.datas,isDouble:a,isDrag:m.isDrag,inputEvent:t},i)),m.pinchFlag&&m.onPinchEnd(t),m.clientStores=[]}};var e=[].concat(t);m.options=tt({checkInput:!1,container:1<e.length?window:e[0],preventRightClick:!0,preventDefault:!0,pinchThreshold:0,events:["touch","mouse"]},n);var r=m.options,i=r.container,o=r.events;if(m.isTouch=-1<o.indexOf("touch"),m.isMouse=-1<o.indexOf("mouse"),m.targets=e,m.isMouse&&(e.forEach(function(t){Q(t,"mousedown",m.onDragStart)}),Q(i,"mousemove",m.onDrag),Q(i,"mouseup",m.onDragEnd),Q(i,"contextmenu",m.onDragEnd)),m.isTouch){var a={passive:!1};e.forEach(function(t){Q(t,"touchstart",m.onDragStart,a)}),Q(i,"touchmove",m.onDrag,a),Q(i,"touchend",m.onDragEnd,a),Q(i,"touchcancel",m.onDragEnd,a)}return m}!function(t,n){function e(){this.constructor=t}K(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}(t,s);var n=t.prototype;return n.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce(function(t,n){return t+n.movement},0)},n.isDragging=function(){return this.isDrag},n.isFlag=function(){return this.flag},n.isPinchFlag=function(){return this.pinchFlag},n.isPinching=function(){return this.isPinch},n.scrollBy=function(t,n,e,r){void 0===r&&(r=!0),this.flag&&(this.clientStores[0].move(t,n),r&&this.onDrag(e,!0))},n.move=function(t,n){var r=t[0],i=t[1],e=this.getCurrentStore().prevClients;return this.moveClients(e.map(function(t){var n=t.clientX,e=t.clientY;return{clientX:n+r,clientY:e+i,originalClientX:n,originalClientY:e}}),n,!0)},n.triggerDragStart=function(t){this.onDragStart(t,!1)},n.unset=function(){var n=this,t=this.targets,e=this.options.container;this.off(),this.isMouse&&(t.forEach(function(t){J(t,"mousedown",n.onDragStart)}),J(e,"mousemove",this.onDrag),J(e,"mouseup",this.onDragEnd),J(e,"contextmenu",this.onDragEnd)),this.isTouch&&(t.forEach(function(t){J(t,"touchstart",n.onDragStart)}),J(e,"touchstart",this.onDragStart),J(e,"touchmove",this.onDrag),J(e,"touchend",this.onDragEnd),J(e,"touchcancel",this.onDragEnd))},n.onPinchStart=function(t){var n=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>n)){var e=new st(et(t));this.pinchFlag=!0,this.clientStores.splice(0,0,e),!1===this.trigger("pinchStart",tt({datas:this.datas,angle:e.getAngle(),touches:this.getCurrentStore().getPositions()},e.getPosition(),{inputEvent:t}))&&(this.pinchFlag=!1)}},n.onPinch=function(t,n){if(this.flag&&this.pinchFlag&&!(n.length<2)){var e=this.getCurrentStore();this.isPinch=!0,this.trigger("pinch",tt({datas:this.datas,movement:this.getMovement(n),angle:e.getAngle(n),rotation:e.getRotation(n),touches:e.getPositions(n),scale:e.getScale(n),distance:e.getDistance(n)},e.getPosition(n),{inputEvent:t}))}},n.onPinchEnd=function(t){if(this.pinchFlag){var n=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var e=this.getCurrentStore();this.trigger("pinchEnd",tt({datas:this.datas,isPinch:n,touches:e.getPositions()},e.getPosition(),{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1}},n.initDrag=function(){this.clientStores=[],this.pinchFlag=!1,this.flag=!1},n.getCurrentStore=function(){return this.clientStores[0]},n.moveClients=function(t,n,e){var r=this.getCurrentStore()[e?"addClients":"getPosition"](t);return this.isDrag=!0,tt({datas:this.datas},r,{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},t}(V),lt=['"',"'",'\\"',"\\'"];function ht(t,n,e,r){for(var i=e;i<r;++i){var o=n[i].trim();if(o===t)return i;var a=i;if("("===o?a=ht(")",n,i+1,r):-1<lt.indexOf(o)&&(a=ht(o,n,i+1,r)),-1===a)break;i=a}return-1}function ft(t){return function(t,n){for(var e=new RegExp("(\\s*"+(n||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),r=t.split(e).filter(Boolean),i=r.length,o=[],a=[],s=0;s<i;++s){var u=r[s].trim(),c=s;if("("===u)c=ht(")",r,s+1,i);else{if(")"===u)throw new Error("invalid format");if(-1<lt.indexOf(u))c=ht(u,r,s+1,i);else if(u===n){a.length&&(o.push(a.join("")),a=[]);continue}}-1===c&&(c=i-1),a.push(r.slice(s,c+1).join("")),s=c}return a.length&&o.push(a.join("")),o}(t,",")}var pt=function(t){for(var n=5381,e=t.length;e;)n=33*n^t.charCodeAt(--e);return n>>>0};function dt(t,n,e,r){var i=document.createElement("style");return i.setAttribute("type","text/css"),i.setAttribute("data-styled-id",t),e.nonce&&i.setAttribute("nonce",e.nonce),i.innerHTML=function(r,t,n){return n.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/gm,function(t,n){var e=n.trim();return(e?ft(e):[""]).map(function(t){var n=t.trim();return 0===n.indexOf("@")?n:-1<n.indexOf(":global")?n.replace(/\:global/g,""):-1<n.indexOf(":host")?""+n.replace(/\:host/g,"."+r):n?"."+r+" "+n:"."+r}).join(", ")+" {"})}(t,n,e),(r||document.head||document.body).appendChild(i),i}function vt(o){var a,s="rCS"+function(t){return pt(t).toString(36)}(o),u=0;return{className:s,inject:function(t,n){void 0===n&&(n={});var e,r=function(t){if(t&&t.getRootNode){var n=t.getRootNode();if(11===n.nodeType)return n}}(t),i=0===u;return(r||i)&&(e=dt(s,o,n,r)),i&&(a=e),r||++u,{destroy:function(){r?(t.removeChild(e),e=null):(0<u&&--u,0===u&&a&&(a.parentNode.removeChild(a),a=null))}}}}}var gt=function(t,n){return(gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};var mt=function(){return(mt=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};var yt=1e-6,bt="undefined"!=typeof Float32Array?Float32Array:Array;function Mt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _t(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],l=n[8],h=n[9],f=n[10],p=n[11],d=n[12],v=n[13],g=n[14],m=n[15],y=e*s-r*a,b=e*u-i*a,M=e*c-o*a,_=r*u-i*s,E=r*c-o*s,P=i*c-o*u,x=l*v-h*d,O=l*g-f*d,C=l*m-p*d,w=h*g-f*v,D=h*m-p*v,S=f*m-p*g,j=y*S-b*D+M*w+_*C-E*O+P*x;return j?(j=1/j,t[0]=(s*S-u*D+c*w)*j,t[1]=(i*D-r*S-o*w)*j,t[2]=(v*P-g*E+m*_)*j,t[3]=(f*E-h*P-p*_)*j,t[4]=(u*C-a*S-c*O)*j,t[5]=(e*S-i*C+o*O)*j,t[6]=(g*M-d*P-m*b)*j,t[7]=(l*P-f*M+p*b)*j,t[8]=(a*D-s*C+c*x)*j,t[9]=(r*C-e*D-o*x)*j,t[10]=(d*E-v*M+m*y)*j,t[11]=(h*M-l*E-p*y)*j,t[12]=(s*O-a*w-u*x)*j,t[13]=(e*w-r*O+i*x)*j,t[14]=(v*b-d*_-g*y)*j,t[15]=(l*_-h*b+f*y)*j,t):null}function Et(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=n[8],f=n[9],p=n[10],d=n[11],v=n[12],g=n[13],m=n[14],y=n[15],b=e[0],M=e[1],_=e[2],E=e[3];return t[0]=b*r+M*s+_*h+E*v,t[1]=b*i+M*u+_*f+E*g,t[2]=b*o+M*c+_*p+E*m,t[3]=b*a+M*l+_*d+E*y,b=e[4],M=e[5],_=e[6],E=e[7],t[4]=b*r+M*s+_*h+E*v,t[5]=b*i+M*u+_*f+E*g,t[6]=b*o+M*c+_*p+E*m,t[7]=b*a+M*l+_*d+E*y,b=e[8],M=e[9],_=e[10],E=e[11],t[8]=b*r+M*s+_*h+E*v,t[9]=b*i+M*u+_*f+E*g,t[10]=b*o+M*c+_*p+E*m,t[11]=b*a+M*l+_*d+E*y,b=e[12],M=e[13],_=e[14],E=e[15],t[12]=b*r+M*s+_*h+E*v,t[13]=b*i+M*u+_*f+E*g,t[14]=b*o+M*c+_*p+E*m,t[15]=b*a+M*l+_*d+E*y,t}function Pt(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=r+r,u=i+i,c=o+o,l=r*s,h=r*u,f=r*c,p=i*u,d=i*c,v=o*c,g=a*s,m=a*u,y=a*c;return t[0]=1-(p+v),t[1]=h+y,t[2]=f-m,t[3]=0,t[4]=h-y,t[5]=1-(l+v),t[6]=d+g,t[7]=0,t[8]=f+m,t[9]=d-g,t[10]=1-(l+p),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function xt(t,n){var e=n[0],r=n[1],i=n[2],o=n[4],a=n[5],s=n[6],u=n[8],c=n[9],l=n[10];return t[0]=Math.hypot(e,r,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(u,c,l),t}function Ot(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t[9]=n[9]-e[9],t[10]=n[10]-e[10],t[11]=n[11]-e[11],t[12]=n[12]-e[12],t[13]=n[13]-e[13],t[14]=n[14]-e[14],t[15]=n[15]-e[15],t}Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var Ct={__proto__:null,create:function(){var t=new bt(16);return bt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},clone:function(t){var n=new bt(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},fromValues:function(t,n,e,r,i,o,a,s,u,c,l,h,f,p,d,v){var g=new bt(16);return g[0]=t,g[1]=n,g[2]=e,g[3]=r,g[4]=i,g[5]=o,g[6]=a,g[7]=s,g[8]=u,g[9]=c,g[10]=l,g[11]=h,g[12]=f,g[13]=p,g[14]=d,g[15]=v,g},set:function(t,n,e,r,i,o,a,s,u,c,l,h,f,p,d,v,g){return t[0]=n,t[1]=e,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=h,t[11]=f,t[12]=p,t[13]=d,t[14]=v,t[15]=g,t},identity:Mt,transpose:function(t,n){if(t===n){var e=n[1],r=n[2],i=n[3],o=n[6],a=n[7],s=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=o,t[11]=n[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t},invert:_t,adjoint:function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],l=n[8],h=n[9],f=n[10],p=n[11],d=n[12],v=n[13],g=n[14],m=n[15];return t[0]=s*(f*m-p*g)-h*(u*m-c*g)+v*(u*p-c*f),t[1]=-(r*(f*m-p*g)-h*(i*m-o*g)+v*(i*p-o*f)),t[2]=r*(u*m-c*g)-s*(i*m-o*g)+v*(i*c-o*u),t[3]=-(r*(u*p-c*f)-s*(i*p-o*f)+h*(i*c-o*u)),t[4]=-(a*(f*m-p*g)-l*(u*m-c*g)+d*(u*p-c*f)),t[5]=e*(f*m-p*g)-l*(i*m-o*g)+d*(i*p-o*f),t[6]=-(e*(u*m-c*g)-a*(i*m-o*g)+d*(i*c-o*u)),t[7]=e*(u*p-c*f)-a*(i*p-o*f)+l*(i*c-o*u),t[8]=a*(h*m-p*v)-l*(s*m-c*v)+d*(s*p-c*h),t[9]=-(e*(h*m-p*v)-l*(r*m-o*v)+d*(r*p-o*h)),t[10]=e*(s*m-c*v)-a*(r*m-o*v)+d*(r*c-o*s),t[11]=-(e*(s*p-c*h)-a*(r*p-o*h)+l*(r*c-o*s)),t[12]=-(a*(h*g-f*v)-l*(s*g-u*v)+d*(s*f-u*h)),t[13]=e*(h*g-f*v)-l*(r*g-i*v)+d*(r*f-i*h),t[14]=-(e*(s*g-u*v)-a*(r*g-i*v)+d*(r*u-i*s)),t[15]=e*(s*f-u*h)-a*(r*f-i*h)+l*(r*u-i*s),t},determinant:function(t){var n=t[0],e=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11],p=t[12],d=t[13],v=t[14],g=t[15];return(n*a-e*o)*(h*g-f*v)-(n*s-r*o)*(l*g-f*d)+(n*u-i*o)*(l*v-h*d)+(e*s-r*a)*(c*g-f*p)-(e*u-i*a)*(c*v-h*p)+(r*u-i*s)*(c*d-l*p)},multiply:Et,translate:function(t,n,e){var r,i,o,a,s,u,c,l,h,f,p,d,v=e[0],g=e[1],m=e[2];return n===t?(t[12]=n[0]*v+n[4]*g+n[8]*m+n[12],t[13]=n[1]*v+n[5]*g+n[9]*m+n[13],t[14]=n[2]*v+n[6]*g+n[10]*m+n[14],t[15]=n[3]*v+n[7]*g+n[11]*m+n[15]):(r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=n[8],f=n[9],p=n[10],d=n[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=h,t[9]=f,t[10]=p,t[11]=d,t[12]=r*v+s*g+h*m+n[12],t[13]=i*v+u*g+f*m+n[13],t[14]=o*v+c*g+p*m+n[14],t[15]=a*v+l*g+d*m+n[15]),t},scale:function(t,n,e){var r=e[0],i=e[1],o=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=n[7]*i,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},rotate:function(t,n,e,r){var i,o,a,s,u,c,l,h,f,p,d,v,g,m,y,b,M,_,E,P,x,O,C,w,D=r[0],S=r[1],j=r[2],T=Math.hypot(D,S,j);return T<yt?null:(D*=T=1/T,S*=T,j*=T,i=Math.sin(e),a=1-(o=Math.cos(e)),s=n[0],u=n[1],c=n[2],l=n[3],h=n[4],f=n[5],p=n[6],d=n[7],v=n[8],g=n[9],m=n[10],y=n[11],b=D*D*a+o,M=S*D*a+j*i,_=j*D*a-S*i,E=D*S*a-j*i,P=S*S*a+o,x=j*S*a+D*i,O=D*j*a+S*i,C=S*j*a-D*i,w=j*j*a+o,t[0]=s*b+h*M+v*_,t[1]=u*b+f*M+g*_,t[2]=c*b+p*M+m*_,t[3]=l*b+d*M+y*_,t[4]=s*E+h*P+v*x,t[5]=u*E+f*P+g*x,t[6]=c*E+p*P+m*x,t[7]=l*E+d*P+y*x,t[8]=s*O+h*C+v*w,t[9]=u*O+f*C+g*w,t[10]=c*O+p*C+m*w,t[11]=l*O+d*C+y*w,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)},rotateX:function(t,n,e){var r=Math.sin(e),i=Math.cos(e),o=n[4],a=n[5],s=n[6],u=n[7],c=n[8],l=n[9],h=n[10],f=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+h*r,t[7]=u*i+f*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=h*i-s*r,t[11]=f*i-u*r,t},rotateY:function(t,n,e){var r=Math.sin(e),i=Math.cos(e),o=n[0],a=n[1],s=n[2],u=n[3],c=n[8],l=n[9],h=n[10],f=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*i-c*r,t[1]=a*i-l*r,t[2]=s*i-h*r,t[3]=u*i-f*r,t[8]=o*r+c*i,t[9]=a*r+l*i,t[10]=s*r+h*i,t[11]=u*r+f*i,t},rotateZ:function(t,n,e){var r=Math.sin(e),i=Math.cos(e),o=n[0],a=n[1],s=n[2],u=n[3],c=n[4],l=n[5],h=n[6],f=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+h*r,t[3]=u*i+f*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=h*i-s*r,t[7]=f*i-u*r,t},fromTranslation:function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},fromScaling:function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotation:function(t,n,e){var r,i,o,a=e[0],s=e[1],u=e[2],c=Math.hypot(a,s,u);return c<yt?null:(a*=c=1/c,s*=c,u*=c,r=Math.sin(n),o=1-(i=Math.cos(n)),t[0]=a*a*o+i,t[1]=s*a*o+u*r,t[2]=u*a*o-s*r,t[3]=0,t[4]=a*s*o-u*r,t[5]=s*s*o+i,t[6]=u*s*o+a*r,t[7]=0,t[8]=a*u*o+s*r,t[9]=s*u*o-a*r,t[10]=u*u*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation:function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromYRotation:function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotationTranslation:Pt,fromQuat2:function(t,n){var e=new bt(3),r=-n[0],i=-n[1],o=-n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=r*r+i*i+o*o+a*a;return 0<h?(e[0]=2*(s*a+l*r+u*o-c*i)/h,e[1]=2*(u*a+l*i+c*r-s*o)/h,e[2]=2*(c*a+l*o+s*i-u*r)/h):(e[0]=2*(s*a+l*r+u*o-c*i),e[1]=2*(u*a+l*i+c*r-s*o),e[2]=2*(c*a+l*o+s*i-u*r)),Pt(t,n,e),t},getTranslation:function(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t},getScaling:xt,getRotation:function(t,n){var e=new bt(3);xt(e,n);var r=1/e[0],i=1/e[1],o=1/e[2],a=n[0]*r,s=n[1]*i,u=n[2]*o,c=n[4]*r,l=n[5]*i,h=n[6]*o,f=n[8]*r,p=n[9]*i,d=n[10]*o,v=a+l+d,g=0;return 0<v?(g=2*Math.sqrt(1+v),t[3]=.25*g,t[0]=(h-p)/g,t[1]=(f-u)/g,t[2]=(s-c)/g):l<a&&d<a?(g=2*Math.sqrt(1+a-l-d),t[3]=(h-p)/g,t[0]=.25*g,t[1]=(s+c)/g,t[2]=(f+u)/g):d<l?(g=2*Math.sqrt(1+l-a-d),t[3]=(f-u)/g,t[0]=(s+c)/g,t[1]=.25*g,t[2]=(h+p)/g):(g=2*Math.sqrt(1+d-a-l),t[3]=(s-c)/g,t[0]=(f+u)/g,t[1]=(h+p)/g,t[2]=.25*g),t},fromRotationTranslationScale:function(t,n,e,r){var i=n[0],o=n[1],a=n[2],s=n[3],u=i+i,c=o+o,l=a+a,h=i*u,f=i*c,p=i*l,d=o*c,v=o*l,g=a*l,m=s*u,y=s*c,b=s*l,M=r[0],_=r[1],E=r[2];return t[0]=(1-(d+g))*M,t[1]=(f+b)*M,t[2]=(p-y)*M,t[3]=0,t[4]=(f-b)*_,t[5]=(1-(h+g))*_,t[6]=(v+m)*_,t[7]=0,t[8]=(p+y)*E,t[9]=(v-m)*E,t[10]=(1-(h+d))*E,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},fromRotationTranslationScaleOrigin:function(t,n,e,r,i){var o=n[0],a=n[1],s=n[2],u=n[3],c=o+o,l=a+a,h=s+s,f=o*c,p=o*l,d=o*h,v=a*l,g=a*h,m=s*h,y=u*c,b=u*l,M=u*h,_=r[0],E=r[1],P=r[2],x=i[0],O=i[1],C=i[2],w=(1-(v+m))*_,D=(p+M)*_,S=(d-b)*_,j=(p-M)*E,T=(1-(f+m))*E,N=(g+y)*E,X=(d+b)*P,Y=(g-y)*P,A=(1-(f+v))*P;return t[0]=w,t[1]=D,t[2]=S,t[3]=0,t[4]=j,t[5]=T,t[6]=N,t[7]=0,t[8]=X,t[9]=Y,t[10]=A,t[11]=0,t[12]=e[0]+x-(w*x+j*O+X*C),t[13]=e[1]+O-(D*x+T*O+Y*C),t[14]=e[2]+C-(S*x+N*O+A*C),t[15]=1,t},fromQuat:function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=e+e,s=r+r,u=i+i,c=e*a,l=r*a,h=r*s,f=i*a,p=i*s,d=i*u,v=o*a,g=o*s,m=o*u;return t[0]=1-h-d,t[1]=l+m,t[2]=f-g,t[3]=0,t[4]=l-m,t[5]=1-c-d,t[6]=p+v,t[7]=0,t[8]=f+g,t[9]=p-v,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum:function(t,n,e,r,i,o,a){var s=1/(e-n),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(e+n)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t},perspective:function(t,n,e,r,i){var o,a=1/Math.tan(n/2);return t[0]=a/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},perspectiveFromFieldOfView:function(t,n,e,r){var i=Math.tan(n.upDegrees*Math.PI/180),o=Math.tan(n.downDegrees*Math.PI/180),a=Math.tan(n.leftDegrees*Math.PI/180),s=Math.tan(n.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*c*.5,t[10]=r/(e-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*e/(e-r),t[15]=0,t},ortho:function(t,n,e,r,i,o,a){var s=1/(n-e),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(n+e)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t},lookAt:function(t,n,e,r){var i,o,a,s,u,c,l,h,f,p,d=n[0],v=n[1],g=n[2],m=r[0],y=r[1],b=r[2],M=e[0],_=e[1],E=e[2];return Math.abs(d-M)<yt&&Math.abs(v-_)<yt&&Math.abs(g-E)<yt?Mt(t):(l=d-M,h=v-_,f=g-E,i=y*(f*=p=1/Math.hypot(l,h,f))-b*(h*=p),o=b*(l*=p)-m*f,a=m*h-y*l,(p=Math.hypot(i,o,a))?(i*=p=1/p,o*=p,a*=p):a=o=i=0,s=h*a-f*o,u=f*i-l*a,c=l*o-h*i,(p=Math.hypot(s,u,c))?(s*=p=1/p,u*=p,c*=p):c=u=s=0,t[0]=i,t[1]=s,t[2]=l,t[3]=0,t[4]=o,t[5]=u,t[6]=h,t[7]=0,t[8]=a,t[9]=c,t[10]=f,t[11]=0,t[12]=-(i*d+o*v+a*g),t[13]=-(s*d+u*v+c*g),t[14]=-(l*d+h*v+f*g),t[15]=1,t)},targetTo:function(t,n,e,r){var i=n[0],o=n[1],a=n[2],s=r[0],u=r[1],c=r[2],l=i-e[0],h=o-e[1],f=a-e[2],p=l*l+h*h+f*f;0<p&&(l*=p=1/Math.sqrt(p),h*=p,f*=p);var d=u*f-c*h,v=c*l-s*f,g=s*h-u*l;return 0<(p=d*d+v*v+g*g)&&(d*=p=1/Math.sqrt(p),v*=p,g*=p),t[0]=d,t[1]=v,t[2]=g,t[3]=0,t[4]=h*g-f*v,t[5]=f*d-l*g,t[6]=l*v-h*d,t[7]=0,t[8]=l,t[9]=h,t[10]=f,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},add:function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t[9]=n[9]+e[9],t[10]=n[10]+e[10],t[11]=n[11]+e[11],t[12]=n[12]+e[12],t[13]=n[13]+e[13],t[14]=n[14]+e[14],t[15]=n[15]+e[15],t},subtract:Ot,multiplyScalar:function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=n[11]*e,t[12]=n[12]*e,t[13]=n[13]*e,t[14]=n[14]*e,t[15]=n[15]*e,t},multiplyScalarAndAdd:function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t[9]=n[9]+e[9]*r,t[10]=n[10]+e[10]*r,t[11]=n[11]+e[11]*r,t[12]=n[12]+e[12]*r,t[13]=n[13]+e[13]*r,t[14]=n[14]+e[14]*r,t[15]=n[15]+e[15]*r,t},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]},equals:function(t,n){var e=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],h=t[9],f=t[10],p=t[11],d=t[12],v=t[13],g=t[14],m=t[15],y=n[0],b=n[1],M=n[2],_=n[3],E=n[4],P=n[5],x=n[6],O=n[7],C=n[8],w=n[9],D=n[10],S=n[11],j=n[12],T=n[13],N=n[14],X=n[15];return Math.abs(e-y)<=yt*Math.max(1,Math.abs(e),Math.abs(y))&&Math.abs(r-b)<=yt*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-M)<=yt*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(o-_)<=yt*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-E)<=yt*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(s-P)<=yt*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(u-x)<=yt*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(c-O)<=yt*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(l-C)<=yt*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(h-w)<=yt*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(f-D)<=yt*Math.max(1,Math.abs(f),Math.abs(D))&&Math.abs(p-S)<=yt*Math.max(1,Math.abs(p),Math.abs(S))&&Math.abs(d-j)<=yt*Math.max(1,Math.abs(d),Math.abs(j))&&Math.abs(v-T)<=yt*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(g-N)<=yt*Math.max(1,Math.abs(g),Math.abs(N))&&Math.abs(m-X)<=yt*Math.max(1,Math.abs(m),Math.abs(X))},mul:Et,sub:Ot},wt=['"',"'",'\\"',"\\'"];function Dt(t,n,e,r){for(var i=e;i<r;++i){var o=n[i].trim();if(o===t)return i;var a=i;if("("===o?a=Dt(")",n,i+1,r):-1<wt.indexOf(o)&&(a=Dt(o,n,i+1,r)),-1===a)break;i=a}return-1}function St(t,n){for(var e=new RegExp("(\\s*"+(n||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),r=t.split(e).filter(Boolean),i=r.length,o=[],a=[],s=0;s<i;++s){var u=r[s].trim(),c=s;if("("===u)c=Dt(")",r,s+1,i);else{if(")"===u)throw new Error("invalid format");if(-1<wt.indexOf(u))c=Dt(u,r,s+1,i);else if(u===n){a.length&&(o.push(a.join("")),a=[]);continue}}-1===c&&(c=i-1),a.push(r.slice(s,c+1).join("")),s=c}return a.length&&o.push(a.join("")),o}function jt(t){return St(t,",")}function Tt(t){return function(t){var r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(t){var n=t.functionName,e=t.functionValue;n&&Ct[n](r,r,e)}),r}(function(t){return(function(t){return Array.isArray(t)}(t)?t:function(t){return St(t,"")}(t)).map(function(t){var n=function(t){var n=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!n||n.length<4?{}:{prefix:n[1],value:n[2],suffix:n[3]}}(t),e=n.prefix,r=n.value,i="",o="";if("translate"===e||"translateX"===e||"translate3d"===e){var a=jt(r).map(function(t){return parseFloat(t)}),s=a[0],u=a[1],c=void 0===u?0:u,l=a[2];i="translate",o=[s,c,void 0===l?0:l]}else if("translateY"===e){i="translate",o=[0,c=parseFloat(r),0]}else if("translateZ"===e){i="translate",o=[0,0,parseFloat(r)]}else if("scale"===e||"scale3d"===e){var h=jt(r).map(function(t){return parseFloat(t)}),f=h[0],p=h[1],d=void 0===p?f:p,v=h[2];i="scale",o=[f,d,void 0===v?1:v]}else if("scaleX"===e){i="scale",o=[f=parseFloat(r),1,1]}else if("scaleY"===e){i="scale",o=[1,d=parseFloat(r),1]}else if("scaleZ"===e){i="scale",o=[1,1,parseFloat(r)]}else if("rotate"===e||"rotateZ"===e||"rotateX"===e||"rotateY"===e){var g=function(t){var n=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!n)return{prefix:"",unit:"",value:NaN};var e=n[1],r=n[2];return{prefix:e,unit:n[3],value:parseFloat(r)}}(r),m=g.unit,y=g.value;i="rotate"===e?"rotateZ":e,o="rad"===m?y:y*Math.PI/180}else if("matrix3d"===e)i="multiply",o=jt(r).map(function(t){return parseFloat(t)});else if("matrix"===e){var b=jt(r).map(function(t){return parseFloat(t)});i="multiply",o=[b[0],b[1],0,0,b[2],b[3],0,0,0,0,1,0,b[4],b[5],0,1]}return{name:e,value:r,functionName:i,functionValue:o}})}(t))}function Nt(t,n){var e=Et([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t,[n[0],n[1]||0,n[2]||0,1]),r=e[3]||1;return[e[0]/r,e[1]/r,e[2]/r]}var Xt=function(t,n){return(Xt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};var Yt=function(){return(Yt=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function At(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return t.map(function(t){return t.split(" ").map(function(t){return t?""+n+t:""}).join(" ")}).join(" ")}.apply(void 0,["scena-"].concat(t))}At("ruler");var Ft,zt,Rt,kt,Gt=At("guide","adder"),Lt=At("guides"),It=At("guide"),Ut=At("dragging"),Ht=At("display-drag"),qt=(Ft="scena-",'\n{\n    position: relative;\n}\ncanvas {\n    position: relative;\n}\n.guide-origin {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    top: 0;\n    left: 0;\n    opacity: 0;\n}\n.guides {\n    position: absolute;\n    top: 0;\n    left: 0;\n    will-change: transform;\n    z-index: 2000;\n}\n.display-drag {\n    position: absolute;\n    will-change: transform;\n    z-index: 2000;\n    font-weight: bold;\n    font-size: 12px;\n    display: none;\n    left: 20px;\n    top: -20px;\n    color: #f33;\n}\n:host.horizontal .guides {\n    width: 100%;\n    height: 0;\n    top: 30px;\n}\n:host.vertical .guides {\n    height: 100%;\n    width: 0;\n    left: 30px;\n}\n.guide {\n    position: absolute;\n    background: #f33;\n    z-index: 2;\n}\n.guide.dragging:before {\n    position: absolute;\n    content: "";\n    width: 100%;\n    height: 100%;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n}\n:host.horizontal .guide {\n    width: 100%;\n    height: 1px;\n    cursor: row-resize;\n}\n:host.vertical .guide {\n    width: 1px;\n    height: 100%;\n    cursor: col-resize;\n}\n.mobile :host.horizontal .guide {\n    transform: scale(1, 2);\n}\n.mobile :host.vertical .guide {\n    transform: scale(2, 1);\n}\n:host.horizontal .guide:before {\n    height: 20px;\n}\n:host.vertical .guide:before {\n    width: 20px;\n}\n.adder {\n    display: none;\n}\n.adder.dragging {\n    display: block;\n}\n'.replace(/([^}{]*){/gm,function(t,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+Ft+"$1")+"{"})),Bt=(zt="div",kt=vt(qt),(Rt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return function(t,n){function e(){this.constructor=t}gt(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}(n,t),n.prototype.render=function(){var t=this.props,n=t.className,e=void 0===n?"":n,r=(t.cspNonce,function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e}(t,["className","cspNonce"])),i=kt.className;return D(zt,mt({ref:m(this,"element"),"data-styled-id":i,className:e+" "+i},r))},n.prototype.componentDidMount=function(){this.injectResult=kt.inject(this.element,{nonce:this.props.cspNonce})},n.prototype.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},n.prototype.getElement=function(){return this.element},n}(F)).injector=kt,Rt),Wt=function(t){function n(){var d=null!==t&&t.apply(this,arguments)||this;return d.state={guides:[]},d.scrollPos=0,d.guideElements=[],d.onDragStart=function(t){var n=t.datas,e=t.inputEvent,r=d.props.onDragStart;!function(t,n){t.classList?t.classList.add(n):t.className+=" "+n}(n.target,Ut),d.onDrag(t),r(Yt({},t,{dragElement:n.target})),e.stopPropagation(),e.preventDefault()},d.onDrag=function(t){var n=d.movePos(t);return d.props.onDrag(Yt({},t,{dragElement:t.datas.target})),n},d.onDragEnd=function(t){var n=t.datas,e=t.isDouble,r=t.distX,i=t.distY,o=d.movePos(t),a=d.state.guides,s=d.props,u=s.setGuides,c=s.onChangeGuides,l=s.zoom,h=s.displayDragPos,f=Math.round(o/l);if(h&&(d.displayElement.style.cssText+="display: none;"),function(t,n){if(t.classList)t.classList.remove(n);else{var e=new RegExp("(\\s|^)"+n+"(\\s|$)");t.className=t.className.replace(e," ")}}(n.target,Ut),d.props.onDragEnd(Yt({},t,{dragElement:n.target})),n.fromRuler)o>=d.scrollPos&&a.indexOf(f)<0&&d.setState({guides:a.concat([f])},function(){c({guides:d.state.guides,distX:r,distY:i}),u(d.state.guides)});else{var p=n.target.getAttribute("data-index");if(e||f<d.scrollPos)a.splice(p,1);else{if(-1<a.indexOf(f))return;a[p]=f}d.setState({guides:a.slice()},function(){var t=d.state.guides;u(t),c({distX:r,distY:i,guides:t})})}},d}!function(t,n){function e(){this.constructor=t}Xt(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}(n,t);var e=n.prototype;return e.render=function(){var t=this.props,n=t.className,e=t.type,r=t.width,i=t.height,o=t.unit,a=t.zoom,s=t.style,u=t.rulerStyle,c=t.backgroundColor,l=t.lineColor,h=t.textColor,f=t.direction,p=t.textFormat,d=t.displayDragPos,v=t.cspNonce,g=this.getTranslateName();return D(Bt,{ref:m(this,"manager"),cspNonce:v,className:At("manager",e)+" "+n,style:s},D("div",{className:At("guide-origin"),ref:m(this,"originElement")}),D(W,{ref:m(this,"ruler"),type:e,width:r,height:i,unit:o,zoom:a,backgroundColor:c,lineColor:l,style:u,textColor:h,direction:f,textFormat:p}),D("div",{className:Lt,ref:m(this,"guidesElement"),style:{transform:g+"("+-this.scrollPos*a+"px)"}},d&&D("div",{className:Ht,ref:m(this,"displayElement")}),D("div",{className:Gt,ref:m(this,"adderElement")}),this.renderGuides()))},e.renderGuides=function(){var e=this,t=this.props,r=t.type,i=t.zoom,n=t.showGuides,o=this.getTranslateName(),a=this.state.guides;if(this.guideElements=[],n)return a.map(function(t,n){return D("div",{className:At("guide",r),ref:function(n,e,r){return function(t){t&&(n[e][r]=t)}}(e,"guideElements",n),key:n,"data-index":n,"data-pos":t,style:{transform:o+"("+t*i+"px)"}})})},e.componentDidMount=function(){var c=this;this.gesto=new ct(this.manager.getElement(),{container:document.body}).on("dragStart",function(t){var n=t.inputEvent.target,e=t.datas,r=c.ruler.canvasElement,i=c.guidesElement,o="horizontal"===c.props.type,a=c.originElement.getBoundingClientRect(),s=function(t,n){void 0===n&&(n=document.body);for(var e=t,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];e;){if(Et(r,Tt(getComputedStyle(e).transform),r),e===n)break;e=e.parentElement}return _t(r,r),r[12]=0,r[13]=0,r[14]=0,r}(c.manager.getElement()),u=Nt(s,[t.clientX-a.left,t.clientY-a.top]);if(u[0]-=i.offsetLeft,u[1]-=i.offsetTop,u[o?1:0]+=c.scrollPos*c.props.zoom,e.offsetPos=u,e.matrix=s,n===r)e.fromRuler=!0,e.target=c.adderElement;else{if(!function(t,n){return t.classList?t.classList.contains(n):!!t.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))}(n,It))return t.stop(),!1;e.target=n}c.onDragStart(t)}).on("drag",this.onDrag).on("dragEnd",this.onDragEnd),this.setState({guides:this.props.defaultGuides||[]})},e.componentWillUnmount=function(){this.gesto.unset()},e.componentDidUpdate=function(t){t.defaultGuides!==this.props.defaultGuides&&this.setState({guides:this.props.defaultGuides||[]})},e.loadGuides=function(t){this.setState({guides:t})},e.getGuides=function(){return this.state.guides},e.scrollGuides=function(e){var t=this.props.zoom,n=this.guidesElement;this.scrollPos=e,n.style.transform=this.getTranslateName()+"("+-e*t+"px)";var r=this.state.guides;this.guideElements.forEach(function(t,n){t&&(t.style.display=-e+r[n]<0?"none":"block")})},e.resize=function(){this.ruler.resize()},e.scroll=function(t){this.ruler.scroll(t)},e.movePos=function(t){var n=t.datas,e=t.distX,r=t.distY,i=this.props,o=i.type,a=i.zoom,s=i.snaps,u=i.snapThreshold,c=i.displayDragPos,l=i.dragPosFormat,h="horizontal"===o,f=Nt(n.matrix,[e,r]),p=n.offsetPos,d=f[0]+p[0],v=f[1]+p[1],g=Math.round(h?v:d),m=Math.round(g/a),y=s.slice().sort(function(t,n){return Math.abs(m-t)-Math.abs(m-n)});if(y.length&&Math.abs(y[0]-m)<u&&(g=(m=y[0])*a),c){var b="horizontal"===o?[d,g]:[g,v];this.displayElement.style.cssText+="display: block;transform: translate(-50%, -50%) translate("+b.map(function(t){return t+"px"}).join(", ")+")",this.displayElement.innerHTML=""+l(m)}return n.target.setAttribute("data-pos",m),n.target.style.transform=this.getTranslateName()+"("+g+"px)",g},e.getTranslateName=function(){return"horizontal"===this.props.type?"translateY":"translateX"},n.defaultProps={className:"",type:"horizontal",setGuides:function(){},zoom:1,style:{width:"100%",height:"100%"},snapThreshold:5,snaps:[],onChangeGuides:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},displayDragPos:!1,dragPosFormat:function(t){return t},defaultGuides:[],showGuides:!0},n}(z),Zt=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n.state=n.props,n}return o(t,e),t.prototype.render=function(){var t=this.state,n=t.container,e=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e}(t,["container"]);return function(t,n){return D(R,{element:t,container:n})}(D(Wt,a({ref:m(this,"guides")},e)),n)},t}(F);var Vt=function(i){function t(t,n){void 0===n&&(n={});var e=i.call(this)||this;e.tempElement=document.createElement("div");var r={};return q.forEach(function(n){r[function(t){return t.replace(/[\s-_]([a-z])/g,function(t,n){return n.toUpperCase()})}("on "+n)]=function(t){return e.trigger(n,t)}}),I(D(Zt,a({},n,r,{container:t,ref:m(e,"innerGuides")})),e.tempElement),e}o(t,i);var n=t.prototype;return n.setState=function(t,n){this.innerGuides.setState(t,n)},n.destroy=function(){I(null,this.tempElement),this.tempElement=null,this.innerGuides=null},n.getPreactGuides=function(){return this.innerGuides.guides},t=function(t,n,e,r){var i,o=arguments.length,a=o<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,e,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(n,e,a):i(n,e))||a);return 3<o&&a&&Object.defineProperty(n,e,a),a}([e(H,function(t,r){t[r]||(t[r]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=this.getPreactGuides();if(e&&e[r])return e[r].apply(e,t)})}),e(U,function(t,e){Object.defineProperty(t,e,{get:function(){return this.getPreactGuides().props[e]},set:function(t){var n;this.innerGuides.setState(((n={})[e]=t,n))},enumerable:!0,configurable:!0})})],t)}(V),$t={__proto__:null,default:Vt,PROPERTIES:U,METHODS:H,EVENTS:q};for(var Qt in $t)Vt[Qt]=$t[Qt];return Vt});
//# sourceMappingURL=guides.min.js.map
