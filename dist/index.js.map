{"version":3,"file":"index.js","sources":["../../src/consts.ts","../../src/InnerGuides.tsx","../../src/Guides.tsx","../src/index.ts"],"sourcesContent":["import { GuidesProps } from \"@scena/react-guides/declaration/types\";\n\nexport const PROPERTIES: Array<keyof GuidesProps> = [\n    \"setGuides\",\n    \"type\", \"width\", \"height\", \"rulerStyle\",\n    \"unit\", \"zoom\", \"style\", \"backgroundColor\", \"lineColor\",\n];\n","import { Component, h } from \"preact\";\nimport { createPortal } from \"preact/compat\";\nimport { ref } from \"framework-utils\";\nimport PreactGuides from \"preact-guides\";\nimport { InnerGuidesProps } from \"./types\";\n\nexport default class InnerGuides extends Component<InnerGuidesProps, InnerGuidesProps> {\n    public state: InnerGuidesProps = {};\n    public preactGuides: PreactGuides;\n    constructor(props: InnerGuidesProps) {\n        super(props);\n        this.state = this.props;\n    }\n    public render() {\n        const { parentElement, ...state } = this.state;\n        return createPortal(<PreactGuides ref={ref(this, \"preactGuides\")} {...state} />, parentElement);\n    }\n}\n","import { ref, Properties } from \"framework-utils\";\nimport { h, render } from \"preact\";\nimport { PROPERTIES } from \"./consts\";\nimport { GuidesInterface, GuidesProps } from \"@scena/react-guides/declaration/types\";\nimport InnerGuides from \"./InnerGuides\";\n\n@Properties(PROPERTIES, (prototype, property) => {\n    Object.defineProperty(prototype, property, {\n        get() {\n            return this.getPreactGuides().props[property];\n        },\n        set(value) {\n            this.innerGuides.setState({\n                [property]: value,\n            });\n        },\n        enumerable: true,\n        configurable: true,\n    });\n})\nclass Guides implements GuidesInterface {\n    private tempElement = document.createElement(\"div\");\n    private innerGuides!: InnerGuides;\n\n    constructor(parentElement: HTMLElement, options: Partial<GuidesProps> = {}) {\n        render(\n            <InnerGuides ref={ref(this, \"innerGuides\")}\n                {...options} parentElement={parentElement} />,\n            this.tempElement,\n        );\n    }\n    public scroll(scrollPos: number) {\n        this.getPreactGuides().scroll(scrollPos);\n    }\n    public scrollGuides(scrollPos: number) {\n        this.getPreactGuides().scrollGuides(scrollPos);\n    }\n    public resize() {\n        this.getPreactGuides().resize();\n    }\n    public getGuides() {\n        return this.getPreactGuides().getGuides();\n    }\n    public destroy() {\n        render(\"\", this.tempElement);\n        this.tempElement = null;\n        this.innerGuides = null;\n    }\n    private getPreactGuides() {\n        return this.innerGuides.preactGuides;\n    }\n}\n\nexport default Guides;\n","import Guides from \"../../src/Guides\";\nimport Dragger from \"@daybrush/drag\";\nimport \"./index.css\";\n\nconst guides1 = new Guides(document.querySelector(\".ruler.horizontal\"), {\n    type: \"horizontal\",\n    rulerStyle: { left: \"30px\", width: \"calc(100% - 30px)\", height: \"100%\" },\n});\nconst guides2 = new Guides(document.querySelector(\".ruler.vertical\"), {\n    type: \"vertical\",\n    rulerStyle: { top: \"30px\", height: \"calc(100% - 30px)\", width: \"100%\" },\n});\n\nwindow.addEventListener(\"resize\", () => {\n    guides1.resize();\n    guides2.resize();\n});\n\nlet scrollX = 0;\nlet scrollY = 0;\n\nnew Dragger(document.body, {\n    drag: e => {\n        scrollX -= e.deltaX;\n        scrollY -= e.deltaY;\n\n        guides1.scroll(scrollX);\n        guides1.scrollGuides(scrollY);\n        guides2.scroll(scrollY);\n        guides2.scrollGuides(scrollX);\n    },\n});\n\ndocument.querySelector(\".box\").addEventListener(\"click\", () => {\n    scrollX = 0;\n    scrollY = 0;\n    guides1.scroll(0);\n    guides1.scrollGuides(0);\n    guides2.scroll(0);\n    guides2.scrollGuides(0);\n});\n"],"names":["PROPERTIES","__extends","props","_super","_this","state","_a","parentElement","createPortal","h","PreactGuides","ref","Component","options","document","createElement","render","InnerGuides","tempElement","scrollPos","getPreactGuides","scroll","scrollGuides","resize","getGuides","innerGuides","preactGuides","Guides","Properties","prototype","property","Object","defineProperty","get","set","value","setState","enumerable","configurable","guides1","querySelector","type","rulerStyle","left","width","height","guides2","top","window","addEventListener","scrollX","scrollY","Dragger","body","drag","e","deltaX","deltaY"],"mappings":"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"}